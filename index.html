<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>WeebOwO - 欢迎来访！</title><meta name="author" content="WeebOwO"><meta name="copyright" content="WeebOwO"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="希望有一天成为一个自己佩服的人">
<meta property="og:type" content="website">
<meta property="og:title" content="WeebOwO">
<meta property="og:url" content="https://xingyudev.site/index.html">
<meta property="og:site_name" content="WeebOwO">
<meta property="og:description" content="希望有一天成为一个自己佩服的人">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/50624245?s=400&u=1d55ff8d5682990ea99d389eed84c471b946f794&v=4">
<meta property="article:author" content="WeebOwO">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://avatars.githubusercontent.com/u/50624245?s=400&u=1d55ff8d5682990ea99d389eed84c471b946f794&v=4"><link rel="shortcut icon" href="https://avatars.githubusercontent.com/u/50624245?s=400&u=1d55ff8d5682990ea99d389eed84c471b946f794&v=4"><link rel="canonical" href="https://xingyudev.site/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'WeebOwO',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-06-07 23:04:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://avatars.githubusercontent.com/u/50624245?s=400&amp;u=1d55ff8d5682990ea99d389eed84c471b946f794&amp;v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s2.loli.net/2023/04/10/qhzD6TsIalHg3tx.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">WeebOwO</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">WeebOwO</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2024/01/20/%E3%80%8A%E9%B8%A3%E6%BD%AE%E3%80%8B%E5%9F%BA%E4%BA%8E%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8E4%E7%9A%84%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%95%88%E6%9E%9C%E5%92%8C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" title="《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践">《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-01-20T07:06:02.000Z" title="Created 2024-01-20 15:06:02">2024-01-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.737Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Game-Development/">Game Development</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Unreal/">Unreal</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GameEngine/">GameEngine</a></span></div><div class="content">《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践前言今年的UOD分享录播在陆续放出，考虑到学习以及归档的必要，开一个简单的小专栏来记录下自己的学习吧。
[UFSH2023]《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践 | 王宏波 库洛游戏_哔哩哔哩_bilibili
首先是鸣潮今年的分享吧，主讲人是王宏波老师，之前我也看过他在Unreal Circle里面对于PureTS的优化分享，讲的也非常的好。
为什么使用Defer Shading
性能考虑 (应该是从Shader变体，光照计算等角度分析之后的结论)
方便做一些后处理效果 (例如GTAO, SSR)
统一多平台，毕竟桌面端肯定是延迟管线

AA做法首先王宏波老师说了下根据去年UOD的统计数据，NPR游戏对屏幕空间的边缘像素占比会到4%-5%，而传统PBR游戏一般会在1%~2%，所以AA这方面会成为卡渲质量的一个重要技术点。
下图是他们所分享的自研TAA流程。

这里是额外加了一个Velocity的Pass并且从TAA变到的TAAU，即多了一个UpSample的过程，这里同时还说了一个我比较感兴趣的点，作者讲到TAA Pass的 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/09/21/Rendering-God-of-War-Ragnarok/" title="Rendering God of War Ragnarok">Rendering God of War Ragnarok</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-09-21T00:58:56.000Z" title="Created 2023-09-21 08:58:56">2023-09-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.573Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-Graphics/">Computer Graphics</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Rendering/">Rendering</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GDC/">GDC</a></span></div><div class="content">Rendering God of War Ragnarok前言演讲的主持人是在2020年作为渲染的主程序加入Santa Monica的，在这之前是FarCry的项目组工作。刚来的时候渲染组里有6个人，之后随着项目的增长加到了10个人。
同时他也强调了自己其实是在开放世界项目的经验较为丰富，对这种线性叙事的游戏开发并不是很熟悉。

Jira首先上来讲了个项目管理工具，我表示直接跳过，对我这种大头兵暂时没有什么帮助。感兴趣的可以点下面的链接。
Jira | Issue &amp; Project Tracking Software | Atlassian
需要解决的问题总的来看需要解决的问题分为4个部分

Narrative Features
Visual Improvement and Art workflow
PlayStation 5 Enhancement
Helping Ourselves


Narrative Features (我该怎么翻译这个东西)

Snow and Ice



在前作里面虽然有雪，但是雪的深度并不够深，无法体现芬布尔之冬，不过他这里没有解释这套新的雪 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/08/06/Vulkan-MultiTHead-Tips/" title="Vulkan MultiThread Tips">Vulkan MultiThread Tips</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-08-06T06:01:10.000Z" title="Created 2023-08-06 14:01:10">2023-08-06</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.735Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Vulkan/">Vulkan</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Vulkan/">Vulkan</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/MultiThread/">MultiThread</a></span></div><div class="content">Vulkan MultiThread TipsVulkan RenderPass 整体的执行流程
Vulkan多线程压力分析When one of the render passes in the application contains a lot of draw calls, such as the gbuffer pass, for CPU submission efficiency it’s important to split the draw calls into multiple groups and record them on multiple threads. There are two ways to do this:

Record primary command buffers that render chunks of draw calls into the same framebuffer, using vkCmdBeginRenderPass and vkCmdEndRenderPass; execute the resulting command bu ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/07/25/%E5%A4%A7%E4%B8%96%E7%95%8C%E6%B8%B2%E6%9F%93%E5%9F%BA%E7%A1%80/" title="大世界渲染基础">大世界渲染基础</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-07-25T14:34:55.000Z" title="Created 2023-07-25 22:34:55">2023-07-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.845Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-Graphics/">Computer Graphics</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/BigWorld-Rendering/">BigWorld Rendering</a></span></div><div class="content">地形，大气，以及云的渲染系统地形渲染方案地形管理
根据视距来进行地形的Tessellation，远处的三角形网格密度低而近处高。
而至于具体的Subdivision方法，可以分为如下

Triangle Based Subdivision
QuadTree-Based Subdivision

这里关键的一点是要明白T-Junction是什么，该怎么解决。
材质采样
这里要注意TextureArray和3D Texture的区别，不过TextureArray的cache miss率较高，有点费。
Virtual Texture
当前一统天下的方案，大部分现代地形的管理都是通过Virtual Texture来进行。
私货
天空以及大气渲染在做这方面的渲染时，一定要注意到天空和云要分开来考虑。

光与介质的交互方式



Volume Rendering Equation



Scattering Type

Rayleigh Scattering : 当参与散射的粒子直径远小于光的波长的时候，波长越短的光自然反射的越厉害，即反射的大部分是蓝光以及紫光。
$\lambda: 波长，h:海 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/06/30/%E5%90%8E%E5%A4%84%E7%90%86%E8%B0%83%E7%A0%94/" title="后处理调研">后处理调研</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-06-30T08:40:15.000Z" title="Created 2023-06-30 16:40:15">2023-06-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.843Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-Graphics/">Computer Graphics</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/PostProcessing/">PostProcessing</a></span></div><div class="content">后处理调研相关论文和博客
Post-processing Effects on Mobile: Optimization and Alternatives

https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/post-processing-effects-on-mobile-optimization-and-alternatives

Bandwidth Efficient Rendering ARM — 这篇不错，讲述了移动端下的渲染优化应该怎么做

HDR 管线研究Volumetric Fog And God RayUE4:三种圣光 God Rays 的做法
[技巧分享] 体积雾圣光 | God Rays Using Volumetric Fog(官方汉化)_哔哩哔哩_bilibili
(1) Geometry Material : 利用模型和材质在需要进行GodRay的地方进行放置，较为简单，但是看起来会比较廉价。
(2) LightShafts : 调整光源属性中L ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/05/27/Memory-consistent-and-coherent/" title="Memory consistent and coherent">Memory consistent and coherent</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-05-27T09:42:55.000Z" title="Created 2023-05-27 17:42:55">2023-05-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.573Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-System/">Computer System</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Memory-Model/">Memory Model</a></span></div><div class="content">缓存的写回策略高速缓存（Cache）是一种将数据副本临时存储在可快速访问的存储内存中的技术。缓存将最近使用的数据存储在小内存中，以提高访问数据的速度。它充当 RAM 和 CPU 之间的缓冲区，从而提高处理器可用数据的速度。
每当处理器想要写入一个字时，它都会检查它想要写入数据的地址是否存在于缓存中。如果地址存在于缓存中，即写入命中（Write Hit）。
我们可以更新缓存中的值并避免昂贵的主内存访问。但这会导致数据不一致（Inconsistent Data）问题。由于高速缓存和主存都有不同的数据，如在多处理器系统中，这将导致两个或多个共享主存的设备出现问题。
而写回策略一般来讲分为两种

写回(Write Back) : 当CPU对cache写命中时，只修改cache的内容不立即写入主存，只当此行被换出时才写回主存。这种策略使cache在CPU－主存之间，不仅在读方向而且在写方向上都起到高速缓存作用。对一cache行的多次写命中都在cache中快速完成修改， 只是需被替换时才写回速度较慢的主存，减少了访问主存的次数从而提高了效率。为支持这种策略，每个cache行必须配置一个修改位，以反 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/04/10/%E7%BC%96%E8%AF%91Unreal%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" title="编译Unreal时遇到的一个小问题记录">编译Unreal时遇到的一个小问题记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-04-10T12:11:57.000Z" title="Created 2023-04-10 20:11:57">2023-04-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.882Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Others/">Others</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Unreal/">Unreal</a></span></div><div class="content">Toolchain Error Generating Project Files for VS 2022Unreal的构建系统是由C#来进行支持的，当我们拉取完Unreal的源码后，我们只要按照官方的指示走，在99%的情况下都不会出大问题。不过这次我却稍微碰到了一个从来没有看过的情况。

Unable to find valid latest C++ toolchain for VisualStudio2022 x64

报错提示为无法找到Visual Studio的C++工具链，当然实际上我清楚我的工具链是没有问题的，因为我已经用这套工具链用了很长时间，从来没有出现过类似的问题，故问题一定是在Unreal的build tool上，在互联网冲浪了一番后，我在官方论坛里面找到了答案。
https://forums.unrealengine.com/t/toolchain-error-generating-project-files-for-vs-2022-ue-5-1/750069
简单来说，当Unreal进行工具链检索时，它默认只会搜索Latest版本的工具链来进行构建，如果你的Vis ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/04/09/%E4%B8%80%E6%AC%A1%E5%A5%87%E5%A6%99%E7%9A%84Vulkan-Debug%E7%BB%8F%E5%8E%86/" title="一次奇妙的Vulkan Debug经历">一次奇妙的Vulkan Debug经历</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-04-09T01:41:55.000Z" title="Created 2023-04-09 09:41:55">2023-04-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.842Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/GPU/">GPU</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Vulkan/">Vulkan</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Debug/">Debug</a></span></div><div class="content">畏惧Vulkan吧最近在跟着官方的Tutorial学Vulkan，不得不说深感其琐碎与复杂，画一个完整设置的三角形就需要大概1000行代码，这在传统的图形API上是难以想象的。但另一方面在画完三角形后，我又感觉自己打通了任督二脉，觉得自己好像抓住了这套渲染流程的精髓。于是在我加入Depth Buffer进入到3D世界时，就发现了一个奇妙的问题。

    




你可能会问，你这是传了个什么图上来，怎么是全黑的。是的，我也想问，为什么是全黑的，为什么我加了个深度测试后就变成全黑了，起初我是以为我的pipeline的配置写的有问题。
12345678910vk::PipelineDepthStencilStateCreateInfo depthStencilStateCreateInfo;depthStencilStateCreateInfo.setDepthTestEnable(true)                           .setDepthWriteEnable(true)                           .setDepthBoundsTest ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/04/07/CP%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7/" title="CP中的一些小技巧">CP中的一些小技巧</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-04-07T05:50:00.000Z" title="Created 2023-04-07 13:50:00">2023-04-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.573Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Algorithm/">Algorithm</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Simple-Trick/">Simple Trick</a></span></div><div class="content">从Codeforces里面学到的一些小Trick本文主要是来自Codeforeces里面的一篇博客。
PSA: don’t use these functions unless you really, really need to

计算$\frac{a}{b}$向上取整, 直接用 (a + b - 1) / b, 不要用ceil((double) a / (double) b)
计算正整数根号，不要直接使用sqrt,转而使用二分(其实这条我并不是很理解，按理说现代的sqrt的性能是没问题的，会直接翻译到硬件指令)

12345678910// works for at least up to (2**31 &amp;mdash; 1)**2long long int_sqrt (long long x) &#123;  long long ans = 0;  for (ll k = 1LL &lt;&lt; 30; k != 0; k /= 2) &#123;    if ((ans + k) * (ans + k) &lt;= x) &#123;      ans += k;    ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/04/04/Tangent-Space-Normal-Mapping/" title="Tangent Space Normal Mapping">Tangent Space Normal Mapping</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-04-04T08:53:42.000Z" title="Created 2023-04-04 16:53:42">2023-04-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-19T17:38:10.733Z" title="Updated 2024-10-20 01:38:10">2024-10-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-Graphics/">Computer Graphics</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Normal-Mapping/">Normal Mapping</a></span></div><div class="content">为什么要法线贴图法线贴图(Normal Map)正如其名所述，是一张包含了法线相关信息的贴图(我在说什么废话)。要介绍为什么使用法线贴图的话，我们首先得了解这样一个事实，在光照和着色算法不变的情况下，我们的图形质量高低基本上取决于我们模型的信息密度，更进一步说的话就是模型的三角形数量。

    




而这一概念也被应用到一种叫做LOD(level of detail)的技术之中，可以看到最右面的模型只有750个三角形，导致它头部的光圈基本上坍缩成了一个矩形，渲染质量显然没有最左面的好。
在有了上面的认知之后，大概率我们会有一个错误的认知，好，无脑堆素材质量就行了，看我一个模型整他个上亿个三角形，就不信出不了好画面。这种力大砖飞的情况虽然确实能显著提高渲染质量，但是游戏的包体大小也会成倍增加，并且这么高模的模型导入游戏，游戏渲染的压力会急速上升，如果没有UE5的Nanite这种技术来做简化，我们基本上没有希望达到实时渲染的速度要求。
不过聪明的人们想到了一种办法来进行近似，其原理大概是这样，虽然我们无法直接导入高模的模型，但是要是我们利用其表面的法线信息以及一个相对低模的模型，也能 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://avatars.githubusercontent.com/u/50624245?s=400&amp;u=1d55ff8d5682990ea99d389eed84c471b946f794&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">WeebOwO</div><div class="author-info__description">希望有一天成为一个自己佩服的人</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/WeebOwO"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcome!</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/01/20/%E3%80%8A%E9%B8%A3%E6%BD%AE%E3%80%8B%E5%9F%BA%E4%BA%8E%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8E4%E7%9A%84%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%95%88%E6%9E%9C%E5%92%8C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" title="《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践">《鸣潮》基于虚幻引擎4的多平台效果和性能优化实践</a><time datetime="2024-01-20T07:06:02.000Z" title="Created 2024-01-20 15:06:02">2024-01-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/21/Rendering-God-of-War-Ragnarok/" title="Rendering God of War Ragnarok">Rendering God of War Ragnarok</a><time datetime="2023-09-21T00:58:56.000Z" title="Created 2023-09-21 08:58:56">2023-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/06/Vulkan-MultiTHead-Tips/" title="Vulkan MultiThread Tips">Vulkan MultiThread Tips</a><time datetime="2023-08-06T06:01:10.000Z" title="Created 2023-08-06 14:01:10">2023-08-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/25/%E5%A4%A7%E4%B8%96%E7%95%8C%E6%B8%B2%E6%9F%93%E5%9F%BA%E7%A1%80/" title="大世界渲染基础">大世界渲染基础</a><time datetime="2023-07-25T14:34:55.000Z" title="Created 2023-07-25 22:34:55">2023-07-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/30/%E5%90%8E%E5%A4%84%E7%90%86%E8%B0%83%E7%A0%94/" title="后处理调研">后处理调研</a><time datetime="2023-06-30T08:40:15.000Z" title="Created 2023-06-30 16:40:15">2023-06-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Computer-Graphics/"><span class="card-category-list-name">Computer Graphics</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Computer-System/"><span class="card-category-list-name">Computer System</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CppCon/"><span class="card-category-list-name">CppCon</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/GPU/"><span class="card-category-list-name">GPU</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Game-Development/"><span class="card-category-list-name">Game Development</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Optimization/"><span class="card-category-list-name">Optimization</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Others/"><span class="card-category-list-name">Others</span><span class="card-category-list-count">4</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Acceleration-Structure/" style="font-size: 1.1em; color: #999">Acceleration Structure</a> <a href="/tags/BigWorld-Rendering/" style="font-size: 1.1em; color: #999">BigWorld Rendering</a> <a href="/tags/C/" style="font-size: 1.5em; color: #99a9bf">C++</a> <a href="/tags/Debug/" style="font-size: 1.1em; color: #999">Debug</a> <a href="/tags/GDC/" style="font-size: 1.1em; color: #999">GDC</a> <a href="/tags/GameEngine/" style="font-size: 1.1em; color: #999">GameEngine</a> <a href="/tags/Mass-Spring-System/" style="font-size: 1.1em; color: #999">Mass-Spring System</a> <a href="/tags/Math/" style="font-size: 1.1em; color: #999">Math</a> <a href="/tags/Memory-Model/" style="font-size: 1.1em; color: #999">Memory Model</a> <a href="/tags/Misc/" style="font-size: 1.37em; color: #99a4b2">Misc</a> <a href="/tags/MultiThread/" style="font-size: 1.1em; color: #999">MultiThread</a> <a href="/tags/Mutithread/" style="font-size: 1.1em; color: #999">Mutithread</a> <a href="/tags/Normal-Mapping/" style="font-size: 1.1em; color: #999">Normal Mapping</a> <a href="/tags/Optimization/" style="font-size: 1.23em; color: #999ea6">Optimization</a> <a href="/tags/Physics/" style="font-size: 1.23em; color: #999ea6">Physics</a> <a href="/tags/PostProcessing/" style="font-size: 1.1em; color: #999">PostProcessing</a> <a href="/tags/Raytracing/" style="font-size: 1.1em; color: #999">Raytracing</a> <a href="/tags/Rendering/" style="font-size: 1.1em; color: #999">Rendering</a> <a href="/tags/Simple-Trick/" style="font-size: 1.1em; color: #999">Simple Trick</a> <a href="/tags/Unreal/" style="font-size: 1.37em; color: #99a4b2">Unreal</a> <a href="/tags/Vulkan/" style="font-size: 1.37em; color: #99a4b2">Vulkan</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">January 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">September 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">August 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">July 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">June 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">May 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">March 2023</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">27</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-06-07T15:04:51.818Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/04/10/qhzD6TsIalHg3tx.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By WeebOwO</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["欢迎来访","明天会比今天更好的！"],
      startDelay: 300,
      typeSpeed: 150,
      loop: false,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '欢迎来访'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>